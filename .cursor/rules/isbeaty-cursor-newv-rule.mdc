# CURSOR RULES — IS BEAUTY LUX SHOPIFY THEME

## ОСНОВНЫЕ ПРИНЦИПЫ

### 1) Структура секций

- ❌ Не создавать «секцию в секции» (OS 2.0).
- ✅ Контент организовывать через `blocks` внутри одной секции.
- ✅ Макет — CSS Grid/Flexbox вместо вложенных секций.
- ✅ Глубина максимум 2 уровня: секция → блоки.

### 2) Schema и редактируемость

- ✅ Любой редактируемый элемент — в `schema`.
- ✅ `id` в `kebab-case`.
- ✅ Понятные `label` на английском.
- ✅ `default` для всех полей.
- ✅ `presets` для быстрого старта и демонстрации.

### 3) Нейминг

- **Секции (файлы):** `s-<purpose>(-<variant>).liquid`
  Примеры: `s-hero.liquid`, `s-features-grid.liquid`, `s-testimonials-carousel.liquid`
- **Блоки (type/id):** `block-<purpose>`
  Примеры: `block-heading`, `block-text`, `block-button`, `block-image`
- **IDs (поля):** `kebab-case`
  Примеры: `hero-heading`, `feature-icon`, `testimonial-author`
- **Labels:** осмысленные, англ.
  Примеры: `Hero Heading`, `Feature Icon`, `Testimonial Author`

### 4) Локализация

- ✅ Все тексты локализуемы (`t:` / `{{ 'key' | t }}`).
- ❌ Не хардкодить тексты в Liquid.
- ✅ Ключи размещать в `locales/*.json`.

### 5) Изображения

- ✅ Только `image_picker`.
- ✅ `alt` в `schema`.
- ✅ Рекомендованные размеры в `info`.
- ❌ Не хардкодить пути к картинкам.

### 6) CSS и стили

- ✅ BEM: `s-<section>__<element>--<modifier>`.
- ✅ Переменные CSS для цветов/размеров.
- ✅ Мобильная адаптивность.
- ❌ Без лишних обёрток и дублирующих правил.

### 7) Обратная совместимость

- ✅ Сначала `deprecated`, затем удаление.
- ✅ Старые `id` сохранять в deprecated-секции.
- ✅ По необходимости миграционные шаги.
- ✅ Тестировать на копии темы.

### 8) Процесс разработки

1. **До правок:** прочитать `AUDIT.md`, `THEME_NAMING.md`, `ERRORS.md`; понять текущую структуру.
2. **Во время:** следовать OS 2.0; валидировать `theme check`; тестировать в Theme Editor; документировать изменения.
3. **После:** `theme check`; обновить `presets`; проверить в Theme Editor; занести проблемы в `ERRORS.md`.

### 9) Файловая структура (пример)

sections/
├─ s-hero.liquid # Главный баннер
├─ s-features-grid.liquid # Сетка преимуществ
├─ s-testimonials.liquid # Отзывы
└─ s-cta.liquid # Призыв к действию

snippets/
├─ block-heading.liquid # Шаблон заголовка (если нужен как сниппет)
├─ block-text.liquid # Шаблон текста
├─ block-button.liquid # Шаблон кнопки
└─ block-image.liquid # Шаблон изображения

locales/
├─ en.json
└─ ru.json

### 10) Качество кода

- ✅ Чистый, читаемый код.
- ✅ Комментарии для нетривиальной логики.
- ✅ Консистентное форматирование.
- ✅ Минимум дубликатов.
- ✅ Бережные обращения к данным.

## ЗАПРЕЩЕНО

- ❌ Вкладывать секции в секции.
- ❌ Хардкодить тексты/изображения.
- ❌ Ломать нейминг/консистентность.
- ❌ Менять шаблоны без стадии `deprecated`.
- ❌ Раздувать CSS/JS.

## РЕКОМЕНДУЕТСЯ

- ✅ Принципы OS 2.0.
- ✅ Официальная дока Shopify.
- ✅ Постоянные проверки в Theme Editor.
- ✅ Документирование изменений.
- ✅ Сохранение обратной совместимости.

## ИСТОЧНИКИ И ВЕБ-ПОИСК

Всегда включать веб-поиск. Приоритет:

1. `shopify.dev` → 2) репозиторий Dawn/официальные темы (GitHub) → 3) Shopify Community → 4) GitHub Issues/PRs → 5) Stack Overflow.

Для каждого решения считать `EVIDENCE_SCORE` (0..100):

- Freshness 0–30: ≤6 мес = 30; 6–18 = 20–28; >36 = ≤8
- Authority 0–30: shopify.dev=30; Dawn/офиц. GH=28–30; SO accepted=22–26
- Engagement 0–20: апвоуты/принятый ответ/комментарии без нерешённых жалоб
- Reproducibility 0–10: есть шаги/diff/код
- Compatibility 0–10: OS 2.0, Shopify CLI v3+

Вести `SOURCES.md` (таблица + выводы) и ссылаться на него в отчётах и `ERRORS.md`.

## ОГРАНИЧЕНИЯ (SCOPE GUARD)

Запрещено менять: `config/settings_data.json`, шаблоны продуктов/коллекций, медиа-ассеты. Все правки — только для **главной** и её секций. После любых правок главной **обновлять `presets`**.

## ПРОЦЕДУРА ПРИМЕНЕНИЯ

- Перед правками читать: `AUDIT.md`, `THEME_NAMING.md`, `ERRORS.md`.
- После — `theme-check --fail-level error`.
- Любую проблему логировать в `ERRORS.md` (дата, симптом, причина, решение, проверка, ссылки на `SOURCES.md`).
