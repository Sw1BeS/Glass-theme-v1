---
description: Аудит главной (временный, применять только для главной)
globs:
  - "templates/index.json"
  - "sections/hero.liquid"
  - "sections/founder.liquid"
  - "sections/product-composition.liquid"
alwaysApply: false
---
# АУДИТ ГЛАВНОЙ СТРАНИЦЫ - IS BEAUTY LUX

**Дата:** 2025-09-17
**Версия:** 1.0
**Статус:** Критические проблемы выявлены

## P1: ЛИШНЯЯ ВЛОЖЕННОСТЬ (СЕКЦИЯ В СЕКЦИИ)

### Проблемы:

1. **`templates/index.json`** - Секции `vp1`, `vp2`, `vp3`, `why` используют тип `media-with-content`, который может содержать вложенные блоки
2. **`sections/section.liquid`** - Содержит группы блоков (`group`) внутри секций, что создает избыточную вложенность
3. **`sections/_blocks.liquid`** - Дублирует функциональность `section.liquid`

### Файлы для исправления:

- `templates/index.json` (строки 127-530) - заменить `media-with-content` на плоскую структуру
- `sections/section.liquid` (строки 778-1075) - убрать группы блоков
- `sections/_blocks.liquid` - удалить или объединить с `section.liquid`

### Решение:

- Создать отдельные секции для каждого медиа-блока
- Использовать `blocks` вместо групп для организации контента
- Применить CSS Grid/Flexbox для макета вместо вложенных секций

## P2: ЭЛЕМЕНТЫ НЕДОСТУПНЫ В THEME EDITOR

### Проблемы:

1. **Хардкод в Liquid:**

   - `sections/how-to-use.liquid` (строки 15-18) - заголовки хардкодены
   - `sections/founder.liquid` (строки 10-11) - "Our Story" хардкоден
   - `sections/product-composition.liquid` - названия продуктов хардкодены

2. **Отсутствующие schema поля:**
   - Нет настроек для изменения текстов в Theme Editor
   - Отсутствуют поля для настройки цветов и шрифтов
   - Нет возможности редактировать изображения через админку

### Файлы для исправления:

- `sections/how-to-use.liquid` - добавить `heading`, `subheading` в schema
- `sections/founder.liquid` - добавить `story_title` в schema
- `sections/product-composition.liquid` - добавить настройки продуктов

### Решение:

- Добавить все текстовые элементы в `schema` с типом `text` или `richtext`
- Создать настройки для изображений с типом `image_picker`
- Добавить цветовые схемы и типографические настройки

## P3: РАЗНОБОЙ В НАИМЕНОВАНИЯХ

### Проблемы:

1. **Секции:**

   - `hero` vs `b2b_hero` - разные префиксы
   - `vp1`, `vp2`, `vp3` - непонятные сокращения
   - `why` - слишком общее название

2. **Блоки:**

   - `heading` vs `h1` vs `h2` - разные стили именования
   - `subheading` vs `sub` - несогласованность
   - `cta1`, `cta2` vs `primary_cta`, `secondary_cta` - разные подходы

3. **ID и Labels:**
   - Смешение `kebab-case` и `snake_case`
   - Отсутствие префиксов для группировки

### Предлагаемый канон:

- **Секции:** `s-<purpose>(-<variant>).liquid`
- **Блоки:** `block_<purpose>`
- **ID:** `kebab-case` с префиксами
- **Labels:** Осмысленные названия на английском

## РИСКИ И ОБРАТНАЯ СОВМЕСТИМОСТЬ

### Высокие риски:

1. **Нарушение существующих шаблонов** - изменения в `section.liquid` затронут все страницы
2. **Потеря данных** - переименование блоков может привести к потере настроек
3. **Конфликты с приложениями** - изменения в schema могут сломать интеграции

### Меры предосторожности:

1. Создать `deprecated` версии перед удалением
2. Использовать миграционные скрипты
3. Тестировать на копии темы
4. Сохранить резервные копии

## ССЫЛКИ НА ИСТОЧНИКИ

См. `SOURCES.md` - раздел "Влияющие источники"

## СЛЕДУЮЩИЕ ШАГИ

1. Создать `cursorrules` с правилами разработки
2. Подготовить `THEME_NAMING.md` с картой переименований
3. Внести минимальные патчи для исправления критических проблем
4. Обновить `presets` для быстрого старта
5. Создать `CHECKLIST.md` для проверки в Theme Editor

