{%- doc -%}
  Product Highlights Section - Showcase key product features
  Features: Chess layout, animated elements, interactive cards
{%- enddoc -%}

{% liquid
  assign highlights = section.blocks | where: 'type', 'highlight'
  assign highlight_count = highlights.size
  assign glass_enabled = section.settings.enable_glass
  if glass_enabled == nil
    assign glass_enabled = settings.enable_glass_effect
  endif
  assign glass_tone = section.settings.glass_tone | default: 'auto'
  assign glass_elevation = section.settings.glass_elevation | default: 'medium'
%}

<div
  class="product-highlights-section{% if glass_enabled %} glass-enabled{% endif %}"
  {% if glass_enabled %}
    data-glass-tone="{{ glass_tone }}"
    data-glass-elevation="{{ glass_elevation }}"
  {% endif %}
>
  <div class="product-highlights-container">
    {%- if section.settings.title != blank -%}
      <div class="highlights-header">
        <h2 class="highlights-title">{{ section.settings.title }}</h2>
        {%- if section.settings.subtitle != blank -%}
          <p class="highlights-subtitle">{{ section.settings.subtitle }}</p>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="highlights-grid">
      {%- for block in highlights -%}
        {%- assign highlight_index = forloop.index -%}
        {%- assign is_even = forloop.index | modulo: 2 -%}

        <div
          class="highlight-card {% if is_even == 0 %}highlight-reverse{% else %}highlight-normal{% endif %}{% if glass_enabled %} glass-surface{% endif %}"
          data-highlight="{{ highlight_index }}"
          {% if glass_enabled %}
            data-disable-hover="true"
          {% endif %}
          {{ block.shopify_attributes }}
        >
          <!-- Highlight Number -->
          <div class="highlight-number">
            <span class="number-text">{{ highlight_index }}</span>
            <div class="number-bg"></div>
          </div>

          <!-- Highlight Content -->
          <div class="highlight-content">
            <div class="highlight-image-wrapper">
              {%- if block.settings.image != blank -%}
                <div class="highlight-image-container">
                  {{
                    block.settings.image
                    | image_url: width: 600
                    | image_tag:
                      loading: 'lazy',
                      sizes: '(min-width: 768px) 400px, 300px',
                      widths: '300, 400, 500, 600',
                      class: 'highlight-image'
                  }}
                  <div class="image-overlay"></div>
                </div>
              {%- else -%}
                <div class="highlight-placeholder">
                  <div class="placeholder-content">
                    <div class="placeholder-icon">{{ block.settings.icon | default: '‚ú®' }}</div>
                    <h4 class="placeholder-title">
                      {{
                        block.settings.placeholder_title
                        | default: 'Add Highlight '
                        | append: highlight_index
                        | append: ' Image'
                      }}
                    </h4>
                    <div class="placeholder-specs">
                      <div class="spec-item">
                        <span class="spec-label">üåê Web:</span>
                        <span class="spec-value">{{ block.settings.placeholder_web_size | default: '800√ó600px' }}</span>
                      </div>
                      <div class="spec-item">
                        <span class="spec-label">üì± Mobile:</span>
                        <span class="spec-value">
                          {{- block.settings.placeholder_mobile_size | default: '600√ó400px' -}}
                        </span>
                      </div>
                      <div class="spec-item spec-creative">
                        <span class="spec-label">üí° Tip:</span>
                        <span class="spec-value">
                          {{-
                            block.settings.placeholder_creative
                            | default: 'Product feature showcase with clean background'
                          -}}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              {%- endif -%}
            </div>

            <div class="highlight-text-wrapper">
              {%- if block.settings.title != blank -%}
                <h3 class="highlight-heading">{{ block.settings.title }}</h3>
              {%- endif -%}

              {%- if block.settings.description != blank -%}
                <div class="highlight-description">{{ block.settings.description }}</div>
              {%- endif -%}

              {%- if block.settings.benefits != blank -%}
                <div class="highlight-benefits">
                  <div class="benefits-header">
                    <span class="benefits-icon">üéØ</span>
                    <span class="benefits-title">Key Benefits</span>
                  </div>
                  <ul class="benefits-list">
                    {%- assign benefits = block.settings.benefits | split: ',' -%}
                    {%- for benefit in benefits -%}
                      <li class="benefit-item">{{ benefit | strip }}</li>
                    {%- endfor -%}
                  </ul>
                </div>
              {%- endif -%}

              {%- if block.settings.cta_text != blank and block.settings.cta_url != blank -%}
                <div class="highlight-cta">
                  <a href="{{ block.settings.cta_url }}" class="cta-button">
                    {{ block.settings.cta_text }}
                    <span class="cta-arrow">‚Üí</span>
                  </a>
                </div>
              {%- endif -%}
            </div>
          </div>

          <!-- Connecting Line -->
          {%- unless forloop.last -%}
            <div class="highlight-connector">
              <div class="connector-line"></div>
              <div class="connector-dots">
                <div class="connector-dot"></div>
                <div class="connector-dot"></div>
                <div class="connector-dot"></div>
              </div>
            </div>
          {%- endunless -%}

          <!-- Decorative Elements -->
          <div class="highlight-decorations">
            <div class="decoration-particle decoration-1"></div>
            <div class="decoration-particle decoration-2"></div>
            <div class="decoration-wave"></div>
          </div>
        </div>
      {%- endfor -%}
    </div>

    {%- if section.settings.footer_text != blank -%}
      <div class="highlights-footer">
        <p class="footer-text">{{ section.settings.footer_text }}</p>
      </div>
    {%- endif -%}
  </div>
</div>

{% stylesheet %}
  .product-highlights-section {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-secondary-bg, #f8f9fa) 92%, transparent) 0%,
      color-mix(in srgb, var(--color-tertiary-bg, #e9ecef) 85%, transparent) 100%
    );
    padding: clamp(3rem, 6vw, 4.5rem) 0;
    overflow: hidden;
    position: relative;
  }

  .product-highlights-container {
    max-width: var(--page-width, 1200px);
    margin: 0 auto;
    padding: 0 clamp(1.5rem, 4vw, 2.5rem);
    display: flex;
    flex-direction: column;
    gap: clamp(3rem, 6vw, 4.5rem);
  }

  .highlights-header {
    text-align: center;
    display: grid;
    gap: 1rem;
  }

  .highlights-title {
    font-size: clamp(2.2rem, 5vw, 3.75rem);
    font-weight: 700;
    color: var(--color-foreground, #2c2c2c);
    margin: 0;
  }

  .highlights-subtitle {
    font-size: clamp(1rem, 2vw, 1.25rem);
    color: var(--glass-foreground-muted, var(--color-foreground, #2c2c2c));
    max-width: 640px;
    margin: 0 auto;
    line-height: 1.6;
  }

  .highlights-grid {
    display: flex;
    flex-direction: column;
    gap: clamp(2.5rem, 5vw, 4rem);
    position: relative;
  }

  .highlight-card {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: clamp(2rem, 4vw, 3rem);
    align-items: center;
    position: relative;
    border-radius: 24px;
    padding: clamp(2rem, 4vw, 2.8rem);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .highlight-card:not(.glass-surface) {
    background: var(--glass-surface-color, rgba(255, 255, 255, 0.78));
    border: 1px solid var(--glass-surface-border-color, rgba(255, 255, 255, 0.4));
    box-shadow: 0 20px 48px var(--glass-shadow-color, rgba(20, 26, 34, 0.12));
  }

  .highlight-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 28px 64px rgba(20, 26, 34, 0.16);
  }

  .highlight-reverse {
    grid-template-columns: 2fr 1fr;
  }

  .highlight-reverse .highlight-image-wrapper {
    order: 2;
  }

  .highlight-reverse .highlight-text-wrapper {
    order: 1;
    text-align: right;
  }

  .highlight-number {
    position: absolute;
    left: clamp(-1.5rem, -3vw, -2rem);
    top: 50%;
    transform: translateY(-50%);
    width: 64px;
    height: 64px;
    background: linear-gradient(
      135deg,
      var(--glass-highlight-color, var(--color-primary, #bf8a7a)) 0%,
      color-mix(in srgb, var(--glass-highlight-color, var(--color-primary, #bf8a7a)) 45%, transparent) 100%
    );
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-on-primary, #ffffff);
    font-weight: 700;
    font-size: 1.5rem;
    box-shadow: 0 14px 30px color-mix(in srgb, var(--glass-highlight-color) 28%, transparent);
    z-index: 3;
  }

  .highlight-reverse .highlight-number {
    left: auto;
    right: clamp(-1.5rem, -3vw, -2rem);
  }

  .highlight-image-wrapper {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 16px 32px rgba(20, 26, 34, 0.12);
  }

  .highlight-image {
    width: 100%;
    display: block;
    transition: transform 0.3s ease;
  }

  .highlight-image-container:hover .highlight-image {
    transform: scale(1.045);
  }

  .image-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--glass-highlight-color) 18%, transparent),
      transparent
    );
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .highlight-image-container:hover .image-overlay {
    opacity: 1;
  }

  .highlight-text-wrapper {
    display: grid;
    gap: clamp(0.75rem, 2.5vw, 1.5rem);
  }

  .highlight-heading {
    font-size: clamp(1.6rem, 3vw, 2.1rem);
    font-weight: 600;
    color: var(--glass-foreground-strong, var(--color-foreground, #2c2c2c));
    margin: 0;
  }

  .highlight-description {
    color: var(--glass-foreground-muted, var(--color-foreground, #2c2c2c));
    line-height: 1.7;
    font-size: 1.05rem;
  }

  .highlight-benefits {
    display: grid;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    border-radius: 18px;
    background: color-mix(in srgb, var(--glass-surface-color, rgba(255, 255, 255, 0.78)) 75%, transparent);
    border: 1px solid var(--glass-surface-border-color, rgba(255, 255, 255, 0.4));
  }

  .benefits-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: var(--glass-foreground-strong, var(--color-foreground, #2c2c2c));
  }

  .benefits-icon {
    font-size: 1.1rem;
  }

  .benefits-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 0.35rem;
  }

  .benefit-item {
    color: var(--glass-foreground-muted, var(--color-foreground, #2c2c2c));
    font-size: 0.98rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .benefit-item::before {
    content: '‚Ä¢';
    font-size: 1.2rem;
    color: var(--glass-highlight-color);
    line-height: 1;
  }

  .highlight-cta {
    margin-top: 0.5rem;
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    color: var(--glass-highlight-color, var(--color-primary, #bf8a7a));
    text-decoration: none;
    font-weight: 600;
    transition: transform 0.25s ease;
  }

  .cta-button:hover {
    transform: translateX(6px);
  }

  .highlight-connector {
    position: absolute;
    left: calc(50% - 1px);
    bottom: clamp(-2.5rem, -4vw, -3rem);
    width: 2px;
    height: clamp(2.5rem, 5vw, 3.5rem);
    background: color-mix(in srgb, var(--glass-highlight-color) 35%, transparent);
  }

  .highlight-reverse .highlight-connector {
    left: auto;
    right: calc(50% - 1px);
  }

  @media (max-width: 980px) {
    .highlight-card,
    .highlight-reverse {
      grid-template-columns: 1fr;
    }

    .highlight-reverse .highlight-image-wrapper,
    .highlight-reverse .highlight-text-wrapper {
      order: initial;
      text-align: left;
    }

    .highlight-number,
    .highlight-reverse .highlight-number {
      position: static;
      transform: none;
      margin-bottom: 1rem;
    }

    .highlight-connector {
      display: none;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Product Highlights",
  "tag": "section",
  "class": "section-product-highlights",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Product Highlights"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Discover what makes our products exceptional"
    },
    {
      "type": "textarea",
      "id": "footer_text",
      "label": "Footer Text",
      "default": "Experience the difference with our premium beauty products"
    },
    {
      "type": "header",
      "content": "Glass styling"
    },
    {
      "type": "checkbox",
      "id": "enable_glass",
      "label": "Enable glass cards",
      "default": true
    },
    {
      "type": "select",
      "id": "glass_tone",
      "label": "Card tone",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "light",
          "label": "Light"
        },
        {
          "value": "dark",
          "label": "Dark"
        }
      ],
      "default": "auto"
    },
    {
      "type": "select",
      "id": "glass_elevation",
      "label": "Card elevation",
      "options": [
        {
          "value": "low",
          "label": "Low"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "high",
          "label": "High"
        }
      ],
      "default": "medium"
    }
  ],
  "blocks": [
    {
      "type": "highlight",
      "name": "Product Highlight",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Highlight Title",
          "default": "Premium Quality"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Highlight Description",
          "default": "<p>Our products are crafted with the finest ingredients and cutting-edge technology.</p>"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Highlight Image"
        },
        {
          "type": "text",
          "id": "benefits",
          "label": "Key Benefits",
          "default": "Long-lasting, Natural ingredients, Dermatologist tested",
          "info": "Separate benefits with commas"
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "Call to Action Text",
          "default": "Learn More"
        },
        {
          "type": "url",
          "id": "cta_url",
          "label": "Call to Action URL"
        },
        {
          "type": "header",
          "content": "Placeholder Settings"
        },
        {
          "type": "text",
          "id": "icon",
          "label": "Placeholder Icon",
          "default": "‚ú®",
          "info": "Emoji or icon to show when no image is uploaded"
        },
        {
          "type": "text",
          "id": "placeholder_title",
          "label": "Placeholder Title",
          "default": "Add Highlight Image",
          "info": "Title shown in placeholder when no image is uploaded"
        },
        {
          "type": "text",
          "id": "placeholder_creative",
          "label": "Placeholder Creative Description",
          "default": "Product feature showcase with clean background",
          "info": "Creative description for the placeholder image"
        },
        {
          "type": "text",
          "id": "placeholder_web_size",
          "label": "Web Size Recommendation",
          "default": "800√ó600px",
          "info": "Recommended size for desktop/web viewing"
        },
        {
          "type": "text",
          "id": "placeholder_mobile_size",
          "label": "Mobile Size Recommendation",
          "default": "600√ó400px",
          "info": "Recommended size for mobile viewing"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Highlights",
      "blocks": [
        {
          "type": "highlight",
          "settings": {
            "title": "Premium Quality",
            "description": "<p>Our products are crafted with the finest ingredients and cutting-edge technology to deliver exceptional results.</p>",
            "benefits": "Long-lasting, Natural ingredients, Dermatologist tested",
            "cta_text": "Learn More",
            "cta_url": "#"
          }
        },
        {
          "type": "highlight",
          "settings": {
            "title": "Innovative Formula",
            "description": "<p>Advanced scientific research meets natural beauty in our revolutionary product formulations.</p>",
            "benefits": "Clinically proven, Hypoallergenic, Cruelty-free",
            "cta_text": "Discover",
            "cta_url": "#"
          }
        },
        {
          "type": "highlight",
          "settings": {
            "title": "Luxury Experience",
            "description": "<p>Indulge in a premium beauty experience that transforms your daily routine into a moment of self-care.</p>",
            "benefits": "Luxury packaging, Refined texture, Elegant finish",
            "cta_text": "Explore",
            "cta_url": "#"
          }
        }
      ]
    }
  ]
}
{% endschema %}
