{% liquid
  if section.settings.desktop_media_position == 'left'
    assign render_order = 'media,product-details'
  else
    assign render_order = 'product-details,media'
  endif

  assign product_has_media = true
  if closest.product.media.size == 0
    assign product_has_media = false
  endif

  assign product_grid_class = 'product-information__grid'

  if product_has_media == false
    assign product_grid_class = product_grid_class | append: ' product-information--media-none'
  elsif section.settings.desktop_media_position == 'right'
    assign product_grid_class = product_grid_class | append: ' product-information--media-right'
  else
    assign product_grid_class = product_grid_class | append: ' product-information--media-left'
  endif

  if section.settings.equal_columns
    assign product_grid_class = product_grid_class | append: ' product-information__grid--half'

    if section.settings.limit_details_width
      assign product_grid_class = product_grid_class | append: ' product-information__grid--limit-details'
    endif
  endif

  case section.settings.content_width
    when 'content-center-aligned'
      assign content_width = 'page-width'
    when 'content-full-width'
      assign content_width = 'full-width'
  endcase

  # Fallback values for section-driven content
  assign product_subtitle = section.settings.product_subtitle
  if product_subtitle == blank and closest.product.metafields.descriptors.subtitle.value != blank
    assign product_subtitle = closest.product.metafields.descriptors.subtitle.value
  endif
  assign product_subtitle = product_subtitle | default: "Premium brow care for sensitive skin"
  assign benefits_heading = section.settings.benefits_heading | default: "Benefits"
  assign benefits_left = section.settings.benefits_left | default: "<p>Nourishing<br/>Hydrating<br/>Soothing</p>"
  assign benefits_right = section.settings.benefits_right | default: "<p>Won't clog pores<br/>Lightweight<br/>Gentle</p>"
  assign formula_heading = section.settings.formula_heading | default: "Our signature formula contains only the best ingredients, selected for max benefits to the skin."
  assign accordion_1_title = section.settings.accordion_1_title | default: "Natural ingredients"
  assign accordion_1_content = section.settings.accordion_1_content | default: "<p>Each product is made with carefully chosen ingredients that focus on your skin's health and glow. Every ingredient is picked for its effectiveness, helping you achieve the best results in your skincare routine.</p>"
  assign accordion_2_title = section.settings.accordion_2_title | default: "Tested for safety"
  assign accordion_2_content = section.settings.accordion_2_content | default: "<p>We prioritize safety in every product we create, ensuring peace of mind for you and your loved ones. Each item undergoes thorough testing, so you can trust that you're using safe and reliable solutions every day.</p>"
  assign accordion_3_title = section.settings.accordion_3_title | default: "Fragrance free"
  assign accordion_3_content = section.settings.accordion_3_content | default: "<p>Our products are fragrance-free, designed for those who prefer a gentle touch without added scents.</p>"
  assign marquee_text_1 = section.settings.marquee_text_1 | default: "FRESH"
  assign marquee_text_2 = section.settings.marquee_text_2 | default: "Expert endorsed"
  assign marquee_text_3 = section.settings.marquee_text_3 | default: "FOR SENSITIVE SKIN"
  assign marquee_text_4 = section.settings.marquee_text_4 | default: "Vitamin rich"
  assign banner_text = section.settings.banner_text | default: "<p>The best skincare routine is the one you can stick to. This formula feels so good, staying consistent won't be a chore.</p>"
  assign recommendations_heading = section.settings.recommendations_heading | default: "Pairs well with"
%}

<script type="application/ld+json">
  {{ closest.product | structured_data }}
</script>

<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="product-information section section--{{ content_width }} spacing-style color-{{ section.settings.color_scheme }} relative"
  style="{% render 'spacing-style', settings: section.settings %} --gap: {{ section.settings.gap }}px;"
>
  {% if section.settings.desktop_media_position == 'left' and product_has_media %}
    {% assign product_href = '#ProductInformation-' | append: section.id %}
    {% render 'skip-to-content-link', href: product_href, text: 'accessibility.skip_to_product_info' %}
  {% endif %}
  <div
    class="{{ product_grid_class }}"
    data-product-grid-content
  >
    {% assign render_order_array = render_order | split: ',' %}
    {% capture media %}
      <div
        class="product-information__media"
        data-testid="product-information-media"
      >
        {%- content_for 'block',
          type: '_product-media-gallery',
          id: 'media-gallery',
          closest.product: closest.product
        -%}
      </div>
    {% endcapture %}

    {% capture details %}
      {% content_for 'block',
        type: '_product-details',
        id: 'product-details',
        closest.product: closest.product
      %}
    {% endcapture %}

    {% for block in render_order_array %}
      {% if block == 'media' and product_has_media %}
        {{ media }}
      {% elsif block == 'product-details' %}
        {{ details }}
      {% endif %}
    {% endfor %}
  </div>

  {% content_for 'blocks' %}
</div>

{% stylesheet %}
  .product-information {
    gap: var(--gap) 0;
  }

  /* Base grid layout */
  .product-information__grid {
    display: grid;
    grid-template-columns: subgrid;
    grid-column: 1 / -1;
  }

  /* Default column positions */
  .product-details {
    order: 1;
  }

  .product-information__media {
    order: 0;
    width: 0;
    min-width: 100%;
  }

  /* Mobile styles */
  @media screen and (max-width: 749px) {
    .product-information__media {
      grid-column: 1 / -1;
    }

    .product-details {
      grid-column: 2 / 3;
    }
  }

  /* Desktop styles */
  @media screen and (min-width: 750px) {
    .product-information__grid {
      grid-column: 2;
    }

    /* Position when there is no media */
    .product-information__grid.product-information--media-none,
    .product-information__grid:has(.product-information__media:empty) {
      .product-details {
        width: var(--narrow-content-width);
        margin: 0 auto;
      }
    }

    /* Position when there is media */
    .product-information__grid:not(:has(.product-information__media:empty)) {
      /* Media on the left side */
      &.product-information--media-left {
        grid-template-columns: 1fr min(50vw, var(--sidebar-width));

        .product-information__media {
          padding-right: calc(var(--gap, 0) / 2);
        }

        .product-details {
          padding-left: calc(var(--gap, 0) / 2);
        }

        &:has(.media-gallery--extend) {
          grid-column: 1 / 3;
        }
      }

      /* Media on the right side */
      &.product-information--media-right {
        grid-template-columns: min(50vw, var(--sidebar-width)) 1fr;

        .product-information__media {
          padding-left: calc(var(--gap, 0) / 2);
          order: 1;
        }

        .product-details {
          padding-right: calc(var(--gap, 0) / 2);
          order: 0;
        }

        &:has(.media-gallery--extend) {
          grid-column: 2 / -1;
        }
      }

      /* Equal width columns */
      &.product-information__grid--half,
      &.product-information__grid--half:has(.media-gallery--extend) {
        grid-column: 1 / -1;
        grid-template-columns:
          var(--full-page-grid-margin) calc(var(--full-page-grid-central-column-width) / 2) calc(
            var(--full-page-grid-central-column-width) / 2
          )
          var(--full-page-grid-margin);

        &.product-information--media-left {
          .product-information__media {
            grid-column: 2 / 3;

            &:has(.media-gallery--extend) {
              grid-column: 1 / 3;
            }
          }

          .product-details {
            grid-column: 3 / 4;
          }
        }

        &.product-information--media-right {
          .product-information__media {
            grid-column: 3 / 4;

            &:has(.media-gallery--extend) {
              grid-column: 3 / -1;
            }
          }

          .product-details {
            grid-column: 2 / 3;
          }
        }
      }
    }

    /* Handle full width section */
    .section--full-width {
      .product-information__grid:not(:has(.product-information__media:empty)),
      .product-information__grid:not(:has(.product-information__media:empty)) {
        &.product-information--media-left,
        &.product-information--media-right {
          grid-column: 1 / -1;
        }

        &.product-information--media-left .product-details {
          padding-inline-end: var(--padding-lg);
        }

        &.product-information--media-right .product-details {
          padding-inline-start: var(--padding-lg);
        }

        &.product-information__grid--half.product-information--media-left {
          .product-information__media {
            grid-column: 1 / 3;
          }

          .product-details {
            grid-column: 3 / -1;
          }
        }

        &.product-information__grid--half.product-information--media-right {
          .product-information__media {
            grid-column: 3 / -1;
          }

          .product-details {
            grid-column: 1 / 3;
          }
        }
      }
    }
  }

  /* Wider sidebar for large screens */
  @media screen and (min-width: 1200px) {
    .product-information__grid:not(
        .product-information__grid--half,
        :has(.product-information__media:empty)
      ).product-information--media-left {
      grid-template-columns: 2fr 1fr;
    }

    .product-information__grid:not(
        .product-information__grid--half,
        :has(.product-information__media:empty)
      ).product-information--media-right {
      grid-template-columns: 1fr 2fr;
    }
  }

  .product-information__grid--limit-details .product-details > .group-block {
    max-width: var(--sidebar-width);
  }

  /* If the header is sticky, make product details content stick underneath the header */
  body:has(#header-group #header-component[data-sticky-state='active']) .product-details.sticky-content--desktop {
    --sticky-header-offset: var(--header-height);
  }

  /* Mobile responsiveness */
  @media screen and (max-width: 768px) {
    .product-information__grid {
      grid-template-columns: 1fr !important;
      gap: 2rem !important;
    }

    .product-information__media {
      order: 1;
    }

    .product-details {
      order: 2;
    }

    .benefits-section {
      padding: 2rem 1rem !important;
    }

    .benefits-list {
      flex-direction: column !important;
      gap: 1rem !important;
    }

    .marquee-text {
      font-size: 1.2rem !important;
    }

    .accordion-content {
      padding: 1rem !important;
    }
  }

  @media screen and (max-width: 480px) {
    .product-information {
      padding: 1rem !important;
    }

    .benefits-section {
      padding: 1.5rem 0.5rem !important;
      border-radius: 20px !important;
    }

    .marquee-text {
      font-size: 1rem !important;
    }

    .banner-text {
      font-size: 1.1rem !important;
      padding: 0 1rem !important;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:names.product_information",
  "blocks": [
    {
      "type": "@app"
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "header",
      "content": "t:content.layout"
    },
    {
      "type": "select",
      "id": "content_width",
      "label": "t:settings.width",
      "options": [
        {
          "value": "content-center-aligned",
          "label": "t:options.page"
        },
        {
          "value": "content-full-width",
          "label": "t:options.full"
        }
      ],
      "default": "content-center-aligned"
    },
    {
      "type": "select",
      "id": "desktop_media_position",
      "label": "t:settings.media_position",
      "options": [
        {
          "value": "left",
          "label": "t:options.left"
        },
        {
          "value": "right",
          "label": "t:options.right"
        }
      ],
      "default": "left"
    },
    {
      "type": "checkbox",
      "id": "equal_columns",
      "label": "t:settings.equal_columns",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "limit_details_width",
      "label": "t:settings.limit_product_details_width",
      "default": false,
      "visible_if": "{{ section.settings.equal_columns }}"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "t:settings.gap",
      "min": 0,
      "max": 48,
      "step": 4,
      "unit": "px",
      "default": 16
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Product Content"
    },
    {
      "type": "text",
      "id": "product_subtitle",
      "label": "Product Subtitle",
      "default": "Premium brow care for sensitive skin"
    },
    {
      "type": "text",
      "id": "benefits_heading",
      "label": "Benefits Heading",
      "default": "Benefits"
    },
    {
      "type": "richtext",
      "id": "benefits_left",
      "label": "Benefits Left Column",
      "default": "<p>Nourishing<br/>Hydrating<br/>Soothing</p>"
    },
    {
      "type": "richtext",
      "id": "benefits_right",
      "label": "Benefits Right Column",
      "default": "<p>Won't clog pores<br/>Lightweight<br/>Gentle</p>"
    },
    {
      "type": "text",
      "id": "formula_heading",
      "label": "Formula Heading",
      "default": "Our signature formula contains only the best ingredients, selected for max benefits to the skin."
    },
    {
      "type": "text",
      "id": "accordion_1_title",
      "label": "Accordion 1 Title",
      "default": "Natural ingredients"
    },
    {
      "type": "richtext",
      "id": "accordion_1_content",
      "label": "Accordion 1 Content",
      "default": "<p>Each product is made with carefully chosen ingredients that focus on your skin's health and glow. Every ingredient is picked for its effectiveness, helping you achieve the best results in your skincare routine.</p>"
    },
    {
      "type": "text",
      "id": "accordion_2_title",
      "label": "Accordion 2 Title",
      "default": "Tested for safety"
    },
    {
      "type": "richtext",
      "id": "accordion_2_content",
      "label": "Accordion 2 Content",
      "default": "<p>We prioritize safety in every product we create, ensuring peace of mind for you and your loved ones. Each item undergoes thorough testing, so you can trust that you're using safe and reliable solutions every day.</p>"
    },
    {
      "type": "text",
      "id": "accordion_3_title",
      "label": "Accordion 3 Title",
      "default": "Fragrance free"
    },
    {
      "type": "richtext",
      "id": "accordion_3_content",
      "label": "Accordion 3 Content",
      "default": "<p>Our products are fragrance-free, designed for those who prefer a gentle touch without added scents.</p>"
    },
    {
      "type": "text",
      "id": "marquee_text_1",
      "label": "Marquee Text 1",
      "default": "FRESH"
    },
    {
      "type": "text",
      "id": "marquee_text_2",
      "label": "Marquee Text 2",
      "default": "Expert endorsed"
    },
    {
      "type": "text",
      "id": "marquee_text_3",
      "label": "Marquee Text 3",
      "default": "FOR SENSITIVE SKIN"
    },
    {
      "type": "text",
      "id": "marquee_text_4",
      "label": "Marquee Text 4",
      "default": "Vitamin rich"
    },
    {
      "type": "richtext",
      "id": "banner_text",
      "label": "Banner Text",
      "default": "<p>The best skincare routine is the one you can stick to. This formula feels so good, staying consistent won't be a chore.</p>"
    },
    {
      "type": "text",
      "id": "recommendations_heading",
      "label": "Recommendations Heading",
      "default": "Pairs well with"
    },
  ],
  "presets": [
    {
      "name": "Product Information",
      "settings": {
        "content_width": "content-center-aligned",
        "desktop_media_position": "left",
        "equal_columns": true,
        "gap": 16,
        "color_scheme": "scheme-1",
        "padding-block-start": 0,
        "padding-block-end": 0,
        "product_subtitle": "Premium brow care for sensitive skin",
        "benefits_heading": "Benefits",
        "benefits_left": "<p>Nourishing<br/>Hydrating<br/>Soothing</p>",
        "benefits_right": "<p>Won't clog pores<br/>Lightweight<br/>Gentle</p>",
        "formula_heading": "Our signature formula contains only the best ingredients, selected for max benefits to the skin.",
        "accordion_1_title": "Natural ingredients",
        "accordion_1_content": "<p>Each product is made with carefully chosen ingredients that focus on your skin's health and glow. Every ingredient is picked for its effectiveness, helping you achieve the best results in your skincare routine.</p>",
        "accordion_2_title": "Tested for safety",
        "accordion_2_content": "<p>We prioritize safety in every product we create, ensuring peace of mind for you and your loved ones. Each item undergoes thorough testing, so you can trust that you're using safe and reliable solutions every day.</p>",
        "accordion_3_title": "Fragrance free",
        "accordion_3_content": "<p>Our products are fragrance-free, designed for those who prefer a gentle touch without added scents.</p>",
        "marquee_text_1": "FRESH",
        "marquee_text_2": "Expert endorsed",
        "marquee_text_3": "FOR SENSITIVE SKIN",
        "marquee_text_4": "Vitamin rich",
        "banner_text": "<p>The best skincare routine is the one you can stick to. This formula feels so good, staying consistent won't be a chore.</p>",
        "recommendations_heading": "Pairs well with"
      }
    }
  ]
}
{% endschema %}
