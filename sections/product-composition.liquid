{% comment %}
  Premium Product Composition Section - Luxury interactive ingredient showcase
  Features: 3D effects, glassmorphism, animated particles, interactive connections, premium animations
{% endcomment %}

<div class="product-composition-section" style="{% render 'spacing-style', settings: section.settings %}">
  <div class="composition-container">
    <!-- Premium Section Header -->
    <div class="premium-header glass-surface">
      <div class="header-background">
        <div class="floating-particles"></div>
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
      </div>

      <div class="header-content">
        {%- assign header_found = false -%}
        {%- for block in section.blocks -%}
          {%- if block.type == 'section_header' -%}
            {%- assign header_found = true -%}
            <h2 class="premium-title">
              <span class="title-line">{{ block.settings.heading | default: 'Our Products' }}</span>
              <span class="title-line accent">& Ingredients</span>
            </h2>
            {%- if block.settings.subheading != blank -%}
              <p class="premium-subtitle">{{ block.settings.subheading }}</p>
            {%- endif -%}
          {%- endif -%}
        {%- endfor -%}

        {%- unless header_found -%}
          <h2 class="premium-title">
            <span class="title-line">{{ section.settings.section_heading | default: 'Our Products' }}</span>
            <span class="title-line accent">& Ingredients</span>
          </h2>
          <p class="premium-subtitle">
            {{
              section.settings.section_subheading
              | default: 'Discover the premium ingredients that make our products exceptional'
            }}
          </p>
        {%- endunless -%}

        <div class="premium-stats">
          <div class="stat-item">
            <div class="stat-number">100%</div>
            <div class="stat-label">Clean</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">23</div>
            <div class="stat-label">Ingredients</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">0</div>
            <div class="stat-label">Toxins</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Premium Products Grid -->
    <div class="premium-products-grid">
      {%- for block in section.blocks -%}
        {%- if block.type == 'product' -%}
          <div class="premium-product-card glass-surface" {{ block.shopify_attributes }}>
            <!-- Product Image with 3D Effects -->
            <div class="product-image-3d">
              <div class="image-container">
                {% if block.settings.product_image != blank %}
                  <!-- Desktop Image -->
                  <div class="product-image-desktop">
                    {% render 'image', image: block.settings.product_image %}
                  </div>

                  <!-- Mobile Image -->
                  <div class="product-image-mobile">
                    {% if block.settings.product_image_mobile != blank %}
                      {% render 'image', image: block.settings.product_image_mobile %}
                    {% else %}
                      <!-- Fallback to desktop image for mobile -->
                      {% render 'image', image: block.settings.product_image %}
                    {% endif %}
                  </div>
                {% else %}
                  <div class="premium-placeholder">
                    <div class="placeholder-content">
                      <div class="placeholder-icon">ðŸ§´</div>
                      <div class="placeholder-text">
                        <strong>{{ block.settings.product_name | default: 'Product Image' }}</strong><br>
                        <div class="placeholder-specs">
                          <span class="size-web">Web: 600Ã—800px</span>
                          <span class="size-mobile">Mobile: 400Ã—600px</span>
                        </div>
                        <div class="placeholder-creative">High-quality product photography with clean background</div>
                      </div>
                    </div>
                  </div>
                {% endif %}

                <!-- Interactive Hover Points with Connections -->
                <div class="interactive-points">
                  <div class="connection-lines"></div>

                  {%- if block.settings.ingredient_1_name != blank -%}
                    <div
                      class="premium-hover-point"
                      style="top: {{ block.settings.ingredient_1_y }}%; left: {{ block.settings.ingredient_1_x }}%;"
                      data-ingredient="1"
                    >
                      <div class="point-outer-ring"></div>
                      <div class="point-inner-circle">
                        {% if block.settings.ingredient_1_media != blank %}
                          <div class="point-media">
                            {% render 'image', image: block.settings.ingredient_1_media %}
                          </div>
                        {% else %}
                          <span class="point-icon">{{ block.settings.ingredient_1_icon | default: 'âœ¨' }}</span>
                        {% endif %}
                      </div>
                      <div class="point-pulse"></div>

                      <div class="premium-tooltip">
                        <div class="tooltip-header">
                          {% if block.settings.ingredient_1_media != blank %}
                            <div class="tooltip-media">
                              {% render 'image', image: block.settings.ingredient_1_media %}
                            </div>
                          {% else %}
                            <div class="tooltip-icon">{{ block.settings.ingredient_1_icon | default: 'âœ¨' }}</div>
                          {% endif %}
                          <h4 class="tooltip-title">{{ block.settings.ingredient_1_name }}</h4>
                        </div>
                        <p class="tooltip-description">{{ block.settings.ingredient_1_description }}</p>
                        {% if block.settings.ingredient_1_benefit != blank %}
                          <div class="tooltip-benefit">
                            <div class="benefit-icon">ðŸ’«</div>
                            <span class="benefit-text">{{ block.settings.ingredient_1_benefit }}</span>
                          </div>
                        {% endif %}
                        <div class="tooltip-arrow"></div>
                      </div>
                    </div>
                  {%- endif -%}

                  {%- if block.settings.ingredient_2_name != blank -%}
                    <div
                      class="premium-hover-point"
                      style="top: {{ block.settings.ingredient_2_y }}%; left: {{ block.settings.ingredient_2_x }}%;"
                      data-ingredient="2"
                    >
                      <div class="point-outer-ring"></div>
                      <div class="point-inner-circle">
                        {% if block.settings.ingredient_2_media != blank %}
                          <div class="point-media">
                            {% render 'image', image: block.settings.ingredient_2_media %}
                          </div>
                        {% else %}
                          <span class="point-icon">{{ block.settings.ingredient_2_icon | default: 'âœ¨' }}</span>
                        {% endif %}
                      </div>
                      <div class="point-pulse"></div>

                      <div class="premium-tooltip">
                        <div class="tooltip-header">
                          {% if block.settings.ingredient_2_media != blank %}
                            <div class="tooltip-media">
                              {% render 'image', image: block.settings.ingredient_2_media %}
                            </div>
                          {% else %}
                            <div class="tooltip-icon">{{ block.settings.ingredient_2_icon | default: 'âœ¨' }}</div>
                          {% endif %}
                          <h4 class="tooltip-title">{{ block.settings.ingredient_2_name }}</h4>
                        </div>
                        <p class="tooltip-description">{{ block.settings.ingredient_2_description }}</p>
                        {% if block.settings.ingredient_2_benefit != blank %}
                          <div class="tooltip-benefit">
                            <div class="benefit-icon">ðŸ’«</div>
                            <span class="benefit-text">{{ block.settings.ingredient_2_benefit }}</span>
                          </div>
                        {% endif %}
                        <div class="tooltip-arrow"></div>
                      </div>
                    </div>
                  {%- endif -%}

                  {%- if block.settings.ingredient_3_name != blank -%}
                    <div
                      class="premium-hover-point"
                      style="top: {{ block.settings.ingredient_3_y }}%; left: {{ block.settings.ingredient_3_x }}%;"
                      data-ingredient="3"
                    >
                      <div class="point-outer-ring"></div>
                      <div class="point-inner-circle">
                        {% if block.settings.ingredient_3_media != blank %}
                          <div class="point-media">
                            {% render 'image', image: block.settings.ingredient_3_media %}
                          </div>
                        {% else %}
                          <span class="point-icon">{{ block.settings.ingredient_3_icon | default: 'âœ¨' }}</span>
                        {% endif %}
                      </div>
                      <div class="point-pulse"></div>

                      <div class="premium-tooltip">
                        <div class="tooltip-header">
                          {% if block.settings.ingredient_3_media != blank %}
                            <div class="tooltip-media">
                              {% render 'image', image: block.settings.ingredient_3_media %}
                            </div>
                          {% else %}
                            <div class="tooltip-icon">{{ block.settings.ingredient_3_icon | default: 'âœ¨' }}</div>
                          {% endif %}
                          <h4 class="tooltip-title">{{ block.settings.ingredient_3_name }}</h4>
                        </div>
                        <p class="tooltip-description">{{ block.settings.ingredient_3_description }}</p>
                        {% if block.settings.ingredient_3_benefit != blank %}
                          <div class="tooltip-benefit">
                            <div class="benefit-icon">ðŸ’«</div>
                            <span class="benefit-text">{{ block.settings.ingredient_3_benefit }}</span>
                          </div>
                        {% endif %}
                        <div class="tooltip-arrow"></div>
                      </div>
                    </div>
                  {%- endif -%}
                </div>
              </div>
            </div>

            <!-- Premium Product Info -->
            <div class="premium-product-info">
              <div class="product-header">
                <h3 class="product-name">{{ block.settings.product_name }}</h3>
                <div class="product-badge">Premium</div>
              </div>

              <p class="product-description">{{ block.settings.product_description }}</p>

              <div class="premium-features">
                <h4 class="features-title">Key Features</h4>
                <div class="features-grid">
                  {%- if block.settings.product_features != blank -%}
                    {%- assign features = block.settings.product_features | split: '\n' -%}
                    {%- for feature in features -%}
                      {%- if feature != blank -%}
                        <div class="feature-card">
                          <div class="feature-icon">âœ“</div>
                          <span class="feature-text">{{ feature | strip }}</span>
                        </div>
                      {%- endif -%}
                    {%- endfor -%}
                  {%- else -%}
                    <div class="feature-card">
                      <div class="feature-icon">âœ“</div>
                      <span class="feature-text">Dermatologist Tested</span>
                    </div>
                    <div class="feature-card">
                      <div class="feature-icon">âœ“</div>
                      <span class="feature-text">Cruelty-Free</span>
                    </div>
                    <div class="feature-card">
                      <div class="feature-icon">âœ“</div>
                      <span class="feature-text">pH Balanced</span>
                    </div>
                    <div class="feature-card">
                      <div class="feature-icon">âœ“</div>
                      <span class="feature-text">Long-Lasting Hold</span>
                    </div>
                    <div class="feature-card">
                      <div class="feature-icon">âœ“</div>
                      <span class="feature-text">Easy to Apply</span>
                    </div>
                    <div class="feature-card">
                      <div class="feature-icon">âœ“</div>
                      <span class="feature-text">Water Resistant</span>
                    </div>
                  {%- endif -%}
                </div>
              </div>
            </div>
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>

    <!-- Premium Ingredients Summary -->
    <div class="premium-summary">
      <div class="summary-background">
        <div class="summary-particles"></div>
      </div>

      <div class="summary-content">
        <h3 class="summary-title">{{ section.settings.summary_title | default: 'Why These Ingredients Matter' }}</h3>
        <div class="premium-summary-grid">
          <div class="summary-card glass-surface">
            <div class="card-icon">ðŸŒ¿</div>
            <h4 class="card-title">{{ section.settings.card1_title | default: 'Clean & Safe' }}</h4>
            <p class="card-text">
              {{
                section.settings.card1_text
                | default: 'All ingredients are dermatologist-tested and free from harmful chemicals, parabens, and sulfates.'
              }}
            </p>
            <div class="card-glow"></div>
          </div>
          <div class="summary-card glass-surface">
            <div class="card-icon">ðŸ’§</div>
            <h4 class="card-title">{{ section.settings.card2_title | default: 'Water-Based' }}</h4>
            <p class="card-text">
              {{ section.settings.card2_text | default: 'Our formulas are water-based for gentle, effective care that won\'t irritate sensitive skin.' }}
            </p>
            <div class="card-glow"></div>
          </div>
          <div class="summary-card glass-surface">
            <div class="card-icon">âš¡</div>
            <h4 class="card-title">{{ section.settings.card3_title | default: 'Proven Results' }}</h4>
            <p class="card-text">
              {{
                section.settings.card3_text
                | default: 'Each ingredient is carefully selected for its proven benefits and effectiveness in beauty care.'
              }}
            </p>
            <div class="card-glow"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .product-composition-section {
    padding: 4rem 0;
    background: var(--color-background, #ffffff);
    position: relative;
  }

  .composition-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
    position: relative;
    z-index: 2;
  }

  /* Section Header */
  .premium-header {
    text-align: center;
    margin-bottom: 4rem;
    position: relative;
    background: var(--color-secondary-bg, #f8f9fa);
    border-radius: 12px;
    padding: 3rem 2rem;
  }

  .header-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: -1;
  }

  .floating-particles {
    position: absolute;
    width: 100%;
    height: 100%;
    background-image:
      radial-gradient(2px 2px at 20px 30px, rgba(191, 138, 122, 0.3), transparent),
      radial-gradient(2px 2px at 40px 70px, rgba(191, 138, 122, 0.2), transparent),
      radial-gradient(1px 1px at 90px 40px, rgba(191, 138, 122, 0.4), transparent),
      radial-gradient(1px 1px at 130px 80px, rgba(191, 138, 122, 0.3), transparent);
    background-repeat: repeat;
    background-size: 200px 200px;
    animation: float 20s linear infinite;
  }

  .gradient-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(40px);
    opacity: 0.6;
    animation: orbFloat 15s ease-in-out infinite;
  }

  .orb-1 {
    width: 300px;
    height: 300px;
    background: linear-gradient(45deg, {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }}, {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }});
    top: -150px;
    left: 10%;
    animation-delay: 0s;
  }

  .orb-2 {
    width: 200px;
    height: 200px;
    background: linear-gradient(45deg, var(--color-accent, #dab4a6), var(--color-primary, #bf8a7a));
    top: 50px;
    right: 15%;
    animation-delay: 5s;
  }

  .orb-3 {
    width: 150px;
    height: 150px;
    background: linear-gradient(45deg, {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }}, {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }});
    bottom: -75px;
    left: 50%;
    animation-delay: 10s;
  }

  .header-content {
    position: relative;
    z-index: 2;
  }

  .premium-title {
    font-size: 3rem;
    font-weight: 700;
    margin: 0 0 1rem 0;
    color: var(--color-foreground, #2c2c2c);
    position: relative;
  }

  .title-line {
    display: block;
    color: var(--color-foreground, #2c2c2c);
    position: relative;
    overflow: hidden;
  }

  .title-line.accent {
    color: var(--color-primary, #bf8a7a);
  }

  .premium-title::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: var(--color-primary, #bf8a7a);
    border-radius: 2px;
  }

  .premium-subtitle {
    font-size: 1.3rem;
    color: var(--color-foreground-muted, #666666);
    max-width: 700px;
    margin: 0 auto 3rem auto;
    line-height: 1.7;
  }

  .premium-stats {
    display: flex;
    justify-content: center;
    gap: 4rem;
    margin-top: 3rem;
  }

  .stat-item {
    text-align: center;
    position: relative;
  }

  .stat-number {
    font-size: 3rem;
    font-weight: 800;
    background: linear-gradient(135deg, {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }}, {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }});
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
  }

  .stat-label {
    font-size: 1rem;
    color: var(--color-foreground-muted, #666666);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* Premium Products Grid */
  .premium-products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
    gap: 6rem;
    margin-bottom: 8rem;
  }

  .premium-product-card {
    position: relative;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 24px;
    padding: 3rem;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }

  .premium-product-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
    border-radius: 24px;
    z-index: -1;
  }

  .premium-product-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow:
      0 25px 50px rgba(0, 0, 0, 0.15),
      0 0 0 1px rgba(255, 255, 255, 0.3);
  }

  /* 3D Product Image */
  .product-image-3d {
    position: relative;
    margin-bottom: 3rem;
    perspective: 1000px;
  }

  .image-container {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    box-shadow:
      0 20px 40px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(255, 255, 255, 0.1);
    background: var(--color-secondary-bg, #f8f9fa);
    transform-style: preserve-3d;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .premium-product-card:hover .image-container {
    transform: rotateY(0deg) rotateX(0deg);
  }

  .premium-hover-point:hover ~ .image-container,
  .premium-hover-point[data-ingredient="1"]:hover ~ .image-container {
    transform: rotateY(-3deg) rotateX(2deg);
  }

  .premium-hover-point[data-ingredient="2"]:hover ~ .image-container {
    transform: rotateY(3deg) rotateX(-2deg);
  }

  .premium-hover-point[data-ingredient="3"]:hover ~ .image-container {
    transform: rotateY(0deg) rotateX(3deg);
  }

  .image-container img {
    width: 100%;
    height: 500px;
    object-fit: cover;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .premium-product-card:hover .image-container img {
    transform: scale(1.1);
  }

  .premium-placeholder {
    height: 500px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--color-secondary-bg, #f8f9fa), var(--color-tertiary-bg, #f0f0f0));
    border: 2px dashed var(--color-border, #d0d0d0);
  }

  .placeholder-content {
    text-align: center;
    color: var(--color-foreground-muted, #666666);
  }

  .placeholder-icon {
    font-size: 4rem;
    margin-bottom: 1.5rem;
    opacity: 0.7;
  }

  .placeholder-text {
    font-size: 1.1rem;
    line-height: 1.6;
  }

  .placeholder-specs {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    margin: 0.75rem 0;
  }

  .size-web,
  .size-mobile {
    font-size: 0.85rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-weight: 600;
  }

  .size-web {
    background: {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }};
    color: {{ section.settings.text_color | default: 'var(--color-foreground, #2c2c2c)' }};
  }

  .size-mobile {
    background: {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }};
    color: {{ section.settings.text_color | default: 'var(--color-foreground, #2c2c2c)' }};
  }

  .placeholder-creative {
    font-size: 0.8rem;
    color: var(--color-foreground-muted, #666666);
    font-style: italic;
    margin-top: 0.5rem;
  }

  /* Interactive Points */
  .interactive-points {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  .connection-lines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
      radial-gradient(circle at 30% 25%, rgba(191, 138, 122, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 70% 40%, rgba(191, 138, 122, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 50% 70%, rgba(191, 138, 122, 0.1) 0%, transparent 50%);
    opacity: 0;
    transition: opacity 0.6s ease;
  }

  .premium-product-card:hover .connection-lines {
    opacity: 1;
  }

  .premium-hover-point {
    position: absolute;
    pointer-events: all;
    cursor: pointer;
    z-index: 10;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .point-outer-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60px;
    height: 60px;
    border: 2px solid var(--color-primary, #bf8a7a);
    border-radius: 50%;
    opacity: 0;
    animation: ringPulse 2s ease-in-out infinite;
  }

  .point-inner-circle {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }}, {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }});
    border: 3px solid rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 2;
    box-shadow:
      0 8px 25px rgba(191, 138, 122, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .point-pulse {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 50px;
    height: 50px;
    background: var(--color-primary, #bf8a7a);
    border-radius: 50%;
    opacity: 0.3;
    animation: pointPulse 2s ease-in-out infinite;
  }

  .point-icon {
    font-size: 1.4rem;
    color: white;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .point-media {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
  }

  .point-media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
  }

  .premium-hover-point:hover .point-inner-circle {
    transform: scale(1.2);
    box-shadow:
      0 12px 35px rgba(191, 138, 122, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
  }

  .premium-hover-point:hover .point-outer-ring {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.5);
  }

  /* Premium Tooltips */
  .premium-tooltip {
    position: absolute;
    bottom: 70px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 16px;
    padding: 2rem;
    min-width: 300px;
    max-width: 350px;
    box-shadow:
      0 20px 40px rgba(0, 0, 0, 0.3),
      0 0 0 1px rgba(255, 255, 255, 0.1);
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 20;
  }

  /* Smart positioning for tooltips */
  .premium-hover-point[data-ingredient="1"]:hover .premium-tooltip {
    left: 0;
    transform: translateX(0) translateY(-15px);
  }

  .premium-hover-point[data-ingredient="2"]:hover .premium-tooltip {
    left: 100%;
    transform: translateX(-100%) translateY(-15px);
  }

  .premium-hover-point[data-ingredient="3"]:hover .premium-tooltip {
    left: 50%;
    transform: translateX(-50%) translateY(-15px);
  }

  /* Mobile responsive tooltips */
  @media (max-width: 768px) {
    .premium-tooltip {
      position: fixed;
      bottom: 20px;
      left: 10px;
      right: 10px;
      transform: none;
      min-width: auto;
      max-width: none;
      padding: 1.5rem;
      font-size: 0.9rem;
    }

    .premium-hover-point[data-ingredient="1"]:hover .premium-tooltip,
    .premium-hover-point[data-ingredient="2"]:hover .premium-tooltip,
    .premium-hover-point[data-ingredient="3"]:hover .premium-tooltip {
      left: 10px;
      right: 10px;
      transform: none;
    }

    .tooltip-header {
      flex-direction: column;
      text-align: center;
      gap: 0.5rem;
    }

    .tooltip-title {
      font-size: 1.1rem;
    }
  }

  .premium-hover-point:hover .premium-tooltip {
    opacity: 1;
    visibility: visible;
    transform: translateY(-15px);
  }

  .premium-hover-point[data-ingredient="1"]:hover .premium-tooltip {
    transform: translateY(-15px);
  }

  .premium-hover-point[data-ingredient="2"]:hover .premium-tooltip {
    transform: translateY(-15px);
  }

  .premium-hover-point[data-ingredient="3"]:hover .premium-tooltip {
    transform: translateY(-15px);
  }

  .tooltip-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .tooltip-icon {
    font-size: 1.5rem;
  }

  .tooltip-media {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    background: var(--color-secondary-bg, #f8f9fa);
  }

  .tooltip-media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .tooltip-media:hover img {
    transform: scale(1.1);
  }

  .tooltip-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--glass-foreground-strong, var(--color-foreground, #2c2c2c));
    margin: 0;
  }

  .tooltip-description {
    font-size: 1rem;
    color: var(--glass-foreground-muted, var(--color-foreground, #2c2c2c));
    line-height: 1.6;
    margin: 0 0 1.5rem 0;
  }

  .tooltip-benefit {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: linear-gradient(135deg, {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }}, {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }});
    color: var(--text-on-primary, #ffffff);
    padding: 0.75rem 1rem;
    border-radius: 12px;
    font-size: 0.9rem;
    font-weight: 600;
  }

  .benefit-icon {
    font-size: 1.1rem;
  }

  .tooltip-arrow {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-top: 12px solid rgba(255, 255, 255, 0.95);
  }

  /* Premium Product Info */
  .premium-product-info {
    position: relative;
  }

  .product-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
  }

  .product-name {
    font-size: 2.2rem;
    font-weight: 700;
    color: var(--color-foreground, #2c2c2c);
    margin: 0;
  }

  .product-badge {
    background: linear-gradient(135deg, {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }}, {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }});
    color: white;
    padding: 0.5rem 1.5rem;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .product-description {
    font-size: 1.1rem;
    color: var(--color-foreground-muted, #666666);
    line-height: 1.7;
    margin: 0 0 2rem 0;
  }

  .premium-features {
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(10px);
    padding: 2rem;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .features-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--color-foreground, #2c2c2c);
    margin: 0 0 1.5rem 0;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  .feature-card {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
  }

  .feature-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  }

  .feature-icon {
    color: var(--color-primary, #bf8a7a);
    font-weight: bold;
    font-size: 1.2rem;
  }

  .feature-text {
    color: var(--color-foreground, #2c2c2c);
    font-size: 0.95rem;
    font-weight: 500;
  }

  /* Premium Summary */
  .premium-summary {
    position: relative;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 24px;
    padding: 4rem;
    overflow: hidden;
  }

  .summary-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }

  .summary-particles {
    position: absolute;
    width: 100%;
    height: 100%;
    background-image:
      radial-gradient(1px 1px at 20px 30px, rgba(191, 138, 122, 0.2), transparent),
      radial-gradient(1px 1px at 40px 70px, rgba(191, 138, 122, 0.15), transparent);
    background-repeat: repeat;
    background-size: 150px 150px;
    animation: float 25s linear infinite reverse;
  }

  .summary-content {
    position: relative;
    z-index: 2;
  }

  .summary-title {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--color-foreground, #2c2c2c);
    text-align: center;
    margin: 0 0 3rem 0;
    position: relative;
  }

  .summary-title::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }}, {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }});
    border-radius: 2px;
    animation: titleGlow 3s ease-in-out infinite alternate;
  }

  .premium-summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2.5rem;
  }

  @media (max-width: 768px) {
    .premium-summary-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .summary-card {
      padding: 1.5rem;
    }
  }

  .summary-card {
    position: relative;
    text-align: center;
    padding: clamp(2rem, 3vw, 2.5rem);
    border-radius: 20px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }

  .summary-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  }

  .card-glow {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, {{ section.settings.primary_color | default: 'var(--color-primary, #bf8a7a)' }}, color-mix(in srgb, {{ section.settings.accent_color | default: 'var(--color-accent, #dab4a6)' }} 60%, transparent));
    opacity: 0;
    transition: opacity 0.4s ease;
    z-index: -1;
  }

  .summary-card:hover .card-glow {
    opacity: 0.1;
  }

  .card-icon {
    font-size: 3rem;
    margin-bottom: 1.5rem;
  }

  .card-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--color-foreground, #2c2c2c);
    margin: 0 0 1rem 0;
  }

  .card-text {
    font-size: 1rem;
    color: var(--color-foreground-muted, #666666);
    line-height: 1.6;
    margin: 0;
  }

  /* Animations */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }

  @keyframes orbFloat {
    0%, 100% { transform: translateY(0px) translateX(0px); }
    33% { transform: translateY(-30px) translateX(20px); }
    66% { transform: translateY(20px) translateX(-15px); }
  }

  @keyframes titleGlow {
    0% {
      opacity: 0.7;
      box-shadow: 0 0 10px var(--color-primary, #bf8a7a);
    }
    100% {
      opacity: 1;
      box-shadow: 0 0 20px var(--color-primary, #bf8a7a);
    }
  }

  @keyframes ringPulse {
    0%, 100% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 0.7;
    }
    50% {
      transform: translate(-50%, -50%) scale(1.2);
      opacity: 0.3;
    }
  }

  @keyframes pointPulse {
    0%, 100% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 0.3;
    }
    50% {
      transform: translate(-50%, -50%) scale(1.1);
      opacity: 0.1;
    }
  }

  /* Mobile Responsive */
  @media (max-width: 768px) {
    .premium-products-grid {
      grid-template-columns: 1fr;
      gap: 4rem;
    }

    .premium-title {
      font-size: 2.5rem;
    }

    .premium-stats {
      gap: 2rem;
    }

    .stat-number {
      font-size: 2rem;
    }

    .premium-tooltip {
      min-width: 250px;
      max-width: 300px;
    }

    .premium-summary-grid {
      grid-template-columns: 1fr;
    }

    .premium-summary {
      padding: 2.5rem;
    }
  }
</style>

{% schema %}
{
  "name": "Product Composition",
  "tag": "section",
  "class": "product-composition-section",
  "settings": [
    {
      "type": "header",
      "content": "Section Content"
    },
    {
      "type": "text",
      "id": "section_heading",
      "label": "Section Heading",
      "default": "Our Products"
    },
    {
      "type": "textarea",
      "id": "section_subheading",
      "label": "Section Subheading",
      "default": "Discover the premium ingredients that make our products exceptional"
    },
    {
      "type": "text",
      "id": "summary_title",
      "label": "Summary Section Title",
      "default": "Why These Ingredients Matter"
    },
    {
      "type": "text",
      "id": "card1_title",
      "label": "Card 1 Title",
      "default": "Clean & Safe"
    },
    {
      "type": "textarea",
      "id": "card1_text",
      "label": "Card 1 Description",
      "default": "All ingredients are dermatologist-tested and free from harmful chemicals, parabens, and sulfates."
    },
    {
      "type": "text",
      "id": "card2_title",
      "label": "Card 2 Title",
      "default": "Water-Based"
    },
    {
      "type": "textarea",
      "id": "card2_text",
      "label": "Card 2 Description",
      "default": "Our formulas are water-based for gentle, effective care that won't irritate sensitive skin."
    },
    {
      "type": "text",
      "id": "card3_title",
      "label": "Card 3 Title",
      "default": "Proven Results"
    },
    {
      "type": "textarea",
      "id": "card3_text",
      "label": "Card 3 Description",
      "default": "Each ingredient is carefully selected for its proven benefits and effectiveness in beauty care."
    },
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "header",
      "content": "Color Settings"
    },
    {
      "type": "color",
      "id": "primary_color",
      "label": "Primary Color",
      "default": "#bf8a7a",
      "info": "Primary brand color"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#dab4a6",
      "info": "Accent brand color"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#2c2c2c",
      "info": "Main text color"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f9fa",
      "info": "Section background color"
    },
    {
      "type": "header",
      "content": "Mobile Settings"
    },
    {
      "type": "checkbox",
      "id": "mobile_simplified_layout",
      "label": "Simplified Layout on Mobile",
      "default": true,
      "info": "Use simplified layout on mobile devices"
    },
    {
      "type": "select",
      "id": "mobile_ingredient_display",
      "label": "Mobile Ingredient Display",
      "default": "list",
      "info": "How to display ingredients on mobile",
      "options": [
        {
          "value": "list",
          "label": "Simple List"
        },
        {
          "value": "grid",
          "label": "Grid Layout"
        },
        {
          "value": "carousel",
          "label": "Carousel"
        }
      ]
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color Scheme",
      "options": [
        {
          "value": "scheme-1",
          "label": "Scheme 1"
        },
        {
          "value": "scheme-2",
          "label": "Scheme 2"
        },
        {
          "value": "scheme-3",
          "label": "Scheme 3"
        }
      ],
      "default": "scheme-1",
      "info": "Choose color scheme for this section"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "options": [
        {
          "value": "full",
          "label": "Full Width"
        },
        {
          "value": "wide",
          "label": "Wide"
        },
        {
          "value": "narrow",
          "label": "Narrow"
        }
      ],
      "default": "full",
      "info": "Control section width"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top Padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 0,
      "info": "Top padding for the section"
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bottom Padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 0,
      "info": "Bottom padding for the section"
    }
  ],
  "blocks": [
    {
      "type": "section_header",
      "name": "Section Header",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Section Heading",
          "default": "Our Products"
        },
        {
          "type": "textarea",
          "id": "subheading",
          "label": "Section Subheading",
          "default": "Discover the powerful, clean ingredients that make our products effective and safe for your beauty routine."
        }
      ]
    },
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "text",
          "id": "product_name",
          "label": "Product Name",
          "default": "IS Beauty Lux Eyebrow Gel"
        },
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "Product Image (Desktop)"
        },
        {
          "type": "image_picker",
          "id": "product_image_mobile",
          "label": "Product Image (Mobile)",
          "info": "Optional: Different image for mobile devices"
        },
        {
          "type": "textarea",
          "id": "product_description",
          "label": "Product Description",
          "default": "Professional-quality eyebrow gel with clean, effective ingredients for all-day hold and natural-looking results."
        },
        {
          "type": "text",
          "id": "product_features",
          "label": "Product Features (one per line)",
          "info": "Enter each feature on a new line"
        },
        {
          "type": "header",
          "content": "Interactive Ingredients"
        },
        {
          "type": "text",
          "id": "ingredient_1_name",
          "label": "Ingredient 1 Name",
          "default": "Hyaluronic Acid"
        },
        {
          "type": "text",
          "id": "ingredient_1_icon",
          "label": "Ingredient 1 Icon (emoji)",
          "default": "ðŸ’§"
        },
        {
          "type": "image_picker",
          "id": "ingredient_1_media",
          "label": "Ingredient 1 Media (Image/GIF)"
        },
        {
          "type": "textarea",
          "id": "ingredient_1_description",
          "label": "Ingredient 1 Description",
          "default": "Deeply hydrates and plumps skin for a smooth, youthful appearance."
        },
        {
          "type": "text",
          "id": "ingredient_1_benefit",
          "label": "Ingredient 1 Benefit",
          "default": "Provides intense moisture and reduces fine lines"
        },
        {
          "type": "range",
          "id": "ingredient_1_x",
          "label": "Ingredient 1 X Position (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 30
        },
        {
          "type": "range",
          "id": "ingredient_1_y",
          "label": "Ingredient 1 Y Position (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 25
        },
        {
          "type": "text",
          "id": "ingredient_2_name",
          "label": "Ingredient 2 Name",
          "default": "Vitamin E"
        },
        {
          "type": "text",
          "id": "ingredient_2_icon",
          "label": "Ingredient 2 Icon (emoji)",
          "default": "ðŸŒ¿"
        },
        {
          "type": "image_picker",
          "id": "ingredient_2_media",
          "label": "Ingredient 2 Media (Image/GIF)"
        },
        {
          "type": "textarea",
          "id": "ingredient_2_description",
          "label": "Ingredient 2 Description",
          "default": "Powerful antioxidant that protects skin from environmental damage."
        },
        {
          "type": "text",
          "id": "ingredient_2_benefit",
          "label": "Ingredient 2 Benefit",
          "default": "Anti-aging protection and skin repair"
        },
        {
          "type": "range",
          "id": "ingredient_2_x",
          "label": "Ingredient 2 X Position (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 70
        },
        {
          "type": "range",
          "id": "ingredient_2_y",
          "label": "Ingredient 2 Y Position (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 40
        },
        {
          "type": "text",
          "id": "ingredient_3_name",
          "label": "Ingredient 3 Name",
          "default": "Aloe Vera"
        },
        {
          "type": "text",
          "id": "ingredient_3_icon",
          "label": "Ingredient 3 Icon (emoji)",
          "default": "ðŸŒ±"
        },
        {
          "type": "image_picker",
          "id": "ingredient_3_media",
          "label": "Ingredient 3 Media (Image/GIF)"
        },
        {
          "type": "textarea",
          "id": "ingredient_3_description",
          "label": "Ingredient 3 Description",
          "default": "Soothes and calms skin while providing natural hydration."
        },
        {
          "type": "text",
          "id": "ingredient_3_benefit",
          "label": "Ingredient 3 Benefit",
          "default": "Gentle care for sensitive skin"
        },
        {
          "type": "range",
          "id": "ingredient_3_x",
          "label": "Ingredient 3 X Position (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50
        },
        {
          "type": "range",
          "id": "ingredient_3_y",
          "label": "Ingredient 3 Y Position (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 70
        }
      ]
    }
  ],
  "max_blocks": 8,
  "presets": [
    {
      "name": "Product Composition",
      "settings": {
        "primary_color": "#bf8a7a",
        "accent_color": "#dab4a6",
        "text_color": "#2c2c2c",
        "background_color": "#f8f9fa",
        "color_scheme": "scheme-1",
        "section_width": "full",
        "padding-block-start": 0,
        "padding-block-end": 0
      },
      "blocks": [
        {
          "type": "section_header",
          "settings": {
            "heading": "Our Products",
            "subheading": "Discover the powerful, clean ingredients that make our products effective and safe for your beauty routine."
          }
        },
        {
          "type": "product",
          "settings": {
            "product_name": "IS Beauty Lux Eyebrow Gel",
            "product_description": "Professional-quality eyebrow gel with clean, effective ingredients for all-day hold and natural-looking results.",
            "product_features": "All-day hold\nDries clear\nDermatologist tested\nWater-based formula\nCruelty-free",
            "ingredient_1_name": "Hyaluronic Acid",
            "ingredient_1_icon": "ðŸ’§",
            "ingredient_1_description": "Deeply hydrates and plumps skin for a smooth, youthful appearance.",
            "ingredient_1_benefit": "Provides intense moisture and reduces fine lines",
            "ingredient_1_x": 30,
            "ingredient_1_y": 25,
            "ingredient_2_name": "Vitamin E",
            "ingredient_2_icon": "ðŸŒ¿",
            "ingredient_2_description": "Powerful antioxidant that protects skin from environmental damage.",
            "ingredient_2_benefit": "Anti-aging protection and skin repair",
            "ingredient_2_x": 70,
            "ingredient_2_y": 40,
            "ingredient_3_name": "Aloe Vera",
            "ingredient_3_icon": "ðŸŒ±",
            "ingredient_3_description": "Soothes and calms skin while providing natural hydration.",
            "ingredient_3_benefit": "Gentle care for sensitive skin",
            "ingredient_3_x": 50,
            "ingredient_3_y": 70
          }
        },
        {
          "type": "product",
          "settings": {
            "product_name": "IS Beauty Lux Brow & Lash Shampoo",
            "product_description": "Gentle, effective cleansing formula designed specifically for brows and lashes with nourishing ingredients.",
            "product_features": "pH-balanced formula\nGentle daily use\nRemoves makeup residue\nStrengthens hair\nSulfate-free",
            "ingredient_1_name": "Biotin",
            "ingredient_1_icon": "ðŸ’ª",
            "ingredient_1_description": "Essential B-vitamin that strengthens and promotes healthy hair growth.",
            "ingredient_1_benefit": "Strengthens and thickens brows and lashes",
            "ingredient_1_x": 25,
            "ingredient_1_y": 30,
            "ingredient_2_name": "Panthenol",
            "ingredient_2_icon": "âœ¨",
            "ingredient_2_description": "Pro-vitamin B5 that conditions and adds shine to hair.",
            "ingredient_2_benefit": "Adds shine and softness",
            "ingredient_2_x": 75,
            "ingredient_2_y": 35,
            "ingredient_3_name": "Chamomile Extract",
            "ingredient_3_icon": "ðŸŒ¼",
            "ingredient_3_description": "Natural anti-inflammatory that soothes and calms sensitive skin.",
            "ingredient_3_benefit": "Gentle care for sensitive eyes",
            "ingredient_3_x": 50,
            "ingredient_3_y": 65
          }
        }
      ]
    }
  ]
}
{% endschema %}

{% stylesheet %}
  /* Product Image Responsive Display */
  .product-image-desktop {
    display: block;
  }

  .product-image-mobile {
    display: none;
  }

  @media (max-width: 767px) {
    .product-image-desktop {
      display: none;
    }

    .product-image-mobile {
      display: block;
    }
  }
{% endstylesheet %}
